(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{109:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return s})),a.d(t,"default",(function(){return c}));var n=a(1),r=a(6),o=(a(0),a(156)),i={id:"python-upload-signal",title:"Creating and uploading signals with Python",sidebar_label:"Upload a Signal"},l={unversionedId:"SDKs/python/python-upload-signal",id:"SDKs/python/python-upload-signal",isDocsHomePage:!1,title:"Creating and uploading signals with Python",description:"What is a signal?",source:"@site/docs/SDKs/python/python-upload-signal.md",permalink:"/docs/SDKs/python/python-upload-signal",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/SDKs/python/python-upload-signal.md",sidebar_label:"Upload a Signal",sidebar:"someSidebar",previous:{title:"Uploading a file with Python",permalink:"/docs/SDKs/python/python-upload-file"},next:{title:"Download a file with Python",permalink:"/docs/SDKs/python/python-download-file"}},s=[{value:"What is a signal?",id:"what-is-a-signal",children:[]},{value:"Setup your client",id:"setup-your-client",children:[]},{value:"Define signals on your Amphora",id:"define-signals-on-your-amphora",children:[]},{value:"Create a signal",id:"create-a-signal",children:[]},{value:"Push signal to your Amphora",id:"push-signal-to-your-amphora",children:[]},{value:"View your data at Amphora Data",id:"view-your-data-at-amphora-data",children:[]},{value:"Use Pandas DataFrames",id:"use-pandas-dataframes",children:[]},{value:"Other code to get you started",id:"other-code-to-get-you-started",children:[]}],p={rightToc:s};function c(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"what-is-a-signal"},"What is a signal?"),Object(o.b)("p",null,"A signal is an updating time series. Examples of signals are weather forecasts, market prices, soil moisture, Covid infections e.t.c."),Object(o.b)("p",null,"If you want to use flat files as well, check out how to ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"./python-upload-file"}),"store an arbitrary file")," here."),Object(o.b)("h2",{id:"setup-your-client"},"Setup your client"),Object(o.b)("p",null,"First setup your client so you can access the Amphora Data platform"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),'from amphora.client import AmphoraDataRepositoryClient, Credentials\n\n# provide your login credentials\ncredentials = Credentials(username="username", password="your password")\n# create a client for interacting with the public Amphora Data Repository\nclient = AmphoraDataRepositoryClient(credentials)\n')),Object(o.b)("p",null,"If you are using a code repository, you may want to use "),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"credentials = Credentials(username=os.getenv('username'), password=os.getenv('password'))\n")),Object(o.b)("h2",{id:"define-signals-on-your-amphora"},"Define signals on your Amphora"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Currently, Amphora are limited to 10 signals each.")),Object(o.b)("p",null,"Before you can upload data, you need to define the properties for which you'll be providing numeric values. A signal needs a name and units. You can also add other attributes or assign a different value type."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),'amphora.create_signal("temperature", attributes={"units":"celcius", "custom":"any string"}) # units are a special attribute\namphora.create_signal("description", value_type="String") # override the default \'Numeric\' value type\n\n')),Object(o.b)("h2",{id:"create-a-signal"},"Create a signal"),Object(o.b)("p",null,"A signal needs to be created as an array of dictionarys. Each dictionary item needs to have a ",Object(o.b)("inlineCode",{parentName:"p"},"datetime"),", and a signal with a value.\nThe minimum definition for a signal is "),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"signal = [dict(t = datetime.now(), temperature = 30)]\n")),Object(o.b)("p",null,"In general we want to create signals over multiple times. You can do this with specific definitions for different time points"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"yesterday = datetime.now() + timedelta(hours=-24)\ntomorrow = datetime.now() + timedelta(hours=24)\n\nsignals = [\n    dict(\n        t = yesterday, # use the 't' property to set a custom timestamp\n        temperature = 27,\n        description = 'Nice and Warm'\n        ),\n    dict(\n        temperature = 17, # ignoring the timestamp means the values are interpreted as occurring now\n        description = 'A Bit Chilly'\n        ),\n    dict(\n        t = yesterday, # You can use times in the future\n        temperature = 25 # properties are all optional\n        )\n]\n")),Object(o.b)("p",null,"You can also do this programatically like here"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"signals = []\nfor t in range(T):\n    signals.append(dict(t=datetimevariable[t], temperature = temp[t]))\n")),Object(o.b)("h2",{id:"push-signal-to-your-amphora"},"Push signal to your Amphora"),Object(o.b)("p",null,"Uploading your signal to the Amphora is very easy. Simply use the command below"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"amphora.push_signals_dict_array(signals) # this sends the data to Amphora Data\n")),Object(o.b)("h2",{id:"view-your-data-at-amphora-data"},"View your data at Amphora Data"),Object(o.b)("p",null,"You're data should now be live in the Amphora you specified. Replace the following id with your Amphora's id, and visit the link."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"https://app.amphoradata.com/Amphorae/Signals?id=<YOUR AMPHORA ID>")),Object(o.b)("p",null,"Your data is now live!"),Object(o.b)("h2",{id:"use-pandas-dataframes"},"Use Pandas DataFrames"),Object(o.b)("p",null,"You can upload Signal data from Pandas DataFrames. By setting the column names, the SDK will automatically create the Signal definitions for you, by inferring the value type from the data."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"import pandas as pd\n\n# make some timestamps\nyesterday = datetime.now() + timedelta(hours=-24)\nnow = datetime.now()\ntomorrow = datetime.now() + timedelta(hours=24)\n\n# intialise data of lists.\ndata  = [['tom', 10], ['nick', 15], ['juli', 14]] \ndf = pd.DataFrame(data, columns = ['name', 'age'])\n\namphora.push_signals_df(df, auto=True) # setting auto to true will automatically create the signal definitions for you.\n")),Object(o.b)("h2",{id:"other-code-to-get-you-started"},"Other code to get you started"),Object(o.b)("p",null,"You can get code to get you started ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/amphoradata/samples/blob/master/generic_templates/Create_a_Signal.py"}),"here")," and ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/amphoradata/samples/blob/master/generic_templates/Update_a_signal.py"}),"here")))}c.isMDXComponent=!0},156:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return b}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=r.a.createContext({}),c=function(e){var t=r.a.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l({},t,{},e)),a},u=function(e){var t=c(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(a),m=n,b=u["".concat(i,".").concat(m)]||u[m]||d[m]||o;return a?r.a.createElement(b,l({ref:t},p,{components:a})):r.a.createElement(b,l({ref:t},p))}));function b(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);